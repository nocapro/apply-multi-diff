# Tests for failing applications of standard diffs
apply_diff_tests:
  - name: fail-on-non-existent-content
    description: Should fail when the diff context does not match the original content
    input:
      original_content: |
        line1
        line2
        line3
      diff_content: |
        --- a/file.txt
        +++ b/file.txt
        @@ -1,3 +1,3 @@
         line1
        -nonexistent line
        +new line
         line3
    expected:
      success: false
      reason: "Could not apply modification"
  - name: fail-on-overlapping-hunks
    description: Should fail to apply diffs that contain overlapping hunks
    input:
      original_content: |
        line1
        line2
        line3
        line4
        line5
      diff_content: |
        --- a/file.txt
        +++ b/file.txt
        @@ -1,3 +1,3 @@
         line1
         line2
        -line3
        +modified3
        @@ -2,3 +2,2 @@
         line2
        -line3
        -line4
        +modified3and4
    expected:
      success: false
      reason: "Hunks overlap"
  - name: hunk-splitting-failure
    description: Should fail if a sub-hunk fails to apply after splitting
    input:
      original_content: |
        function partA() {
            // some code A
        }
        function partB() {
            // completely different code B
        }
      diff_content: |
        --- a/file.js
        +++ b/file.js
        @@ -1,5 +1,5 @@
         function partA() {
        -    // some code A
        +    // new code A
         }
         function partB() {
        -    // some code B
        +    // new code B
         }
    expected:
      success: false
      reason: "Could not apply modification"