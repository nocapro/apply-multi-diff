# Tests for successful application of standard diffs
apply_diff_tests:
  - name: simple-modification
    description: Should apply a simple modification, addition, and deletion correctly
    input:
      original_content: |
        line1
        line2
        line3
      diff_content: |
        --- a/file.txt
        +++ b/file.txt
        @@ -1,3 +1,4 @@
         line1
        +new line
         line2
        -line3
        +modified line3
    expected:
      success: true
      content: |
        line1
        new line
        line2
        modified line3

  - name: multiple-hunks
    description: Should correctly apply a diff with multiple, non-contiguous hunks
    input:
      original_content: |
        line1
        line2
        line3
        line4
        line5
      diff_content: |
        --- a/file.txt
        +++ b/file.txt
        @@ -1,2 +1,2 @@
         line1
        -line2
        +modified line2
        @@ -4,2 +4,2 @@
         line4
        -line5
        +modified line5
    expected:
      success: true
      content: |
        line1
        modified line2
        line3
        line4
        modified line5

  - name: correct-modification-with-similar-code
    description: Should correctly modify the right section when similar code exists elsewhere
    input:
      original_content: |
        function add(a, b) {
          return a + b;
        }

        function multiply(a, b) {
          return a + b;  // Bug here
        }
      diff_content: |
        --- a/math.js
        +++ b/math.js
        @@ -5,3 +5,3 @@
         function multiply(a, b) {
        -  return a + b;  // Bug here
        +  return a * b;
         }
    expected:
      success: true
      content: |
        function add(a, b) {
          return a + b;
        }

        function multiply(a, b) {
          return a * b;
        }

  - name: handle-indentation-changes
    description: Should correctly handle changes involving different types of indentation
    input:
      original_content: |
        function example() {
          let a = 1;
            let b = 2;
        }
      diff_content: |
        --- a/file.js
        +++ b/file.js
        @@ -1,4 +1,5 @@
         function example() {
           let a = 1;
        +  // new line
             let b = 2;
         }
    expected:
      success: true
      content: |
        function example() {
          let a = 1;
          // new line
            let b = 2;
        }

  - name: handle-empty-lines-modification
    description: Should correctly apply changes that involve empty lines
    input:
      original_content: |
        line1

        line3
      diff_content: |
        --- a/file.txt
        +++ b/file.txt
        @@ -1,3 +1,3 @@
         line1
         
        -line3
        +line3-modified
    expected:
      success: true
      content: |
        line1

        line3-modified