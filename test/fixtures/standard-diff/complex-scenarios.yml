# More complex scenarios for standard diff
apply_diff_tests:
  - name: context-only-hunk
    description: Should do nothing for a hunk that contains only context lines
    input:
      original_content: |
        line 1
        line 2
        line 3
      diff_content: |
        --- a/file.txt
        +++ b/file.txt
        @@ -1,3 +1,3 @@
         line 1
         line 2
         line 3
    expected:
      success: true
      content: |
        line 1
        line 2
        line 3
  - name: whitespace-only-change
    description: Should correctly apply a change that only modifies indentation
    input:
      original_content: |
        function test() {
        return 1;
        }
      diff_content: |
        --- a/file.js
        +++ b/file.js
        @@ -1,3 +1,3 @@
         function test() {
        -return 1;
        +  return 1;
         }
    expected:
      success: true
      content: |
        function test() {
          return 1;
        }
  - name: context-line-with-special-chars
    description: Should correctly handle context lines that start with characters like '+' or '-'
    input:
      original_content: |
        // Calculations
        const x = 1;
        const y = -2;
        const z = x + y;
      diff_content: |
        --- a/file.js
        +++ b/file.js
        @@ -2,3 +2,3 @@
         const x = 1;
         const y = -2;
        -const z = x + y;
        +const z = x - y; // Change sign
    expected:
      success: true
      content: |
        // Calculations
        const x = 1;
        const y = -2;
        const z = x - y; // Change sign
  - name: large-hunk-split-with-fuzzy-subhunks
    description: Should split a large, broken hunk and apply valid sub-parts using fuzzy matching
    input:
      original_content: |
        // Block A
        function blockA() {
            console.log("A");
        }

        // User edit here, broke the hunk
        console.log("user edit 1");

        // Block B - slightly modified by user
        function blockB() { // user comment
            console.log("B");
        }

        // User edit here, broke the hunk again
        console.log("user edit 2");

        // Block C
        function blockC() {
            console.log("C");
        }
      diff_content: |
        --- a/file.js
        +++ b/file.js
        @@ -1,13 +1,13 @@
         // Block A
         function blockA() {
        -    console.log("A");
        +    console.log("A modified");
         }
         
         // Block B
         function blockB() {
        -    console.log("B");
        +    console.log("B modified");
         }
         
         // Block C
         function blockC() {
        -    console.log("C");
        +    console.log("C modified");
         }
    expected:
      success: false
      reason: "Could not apply modification"